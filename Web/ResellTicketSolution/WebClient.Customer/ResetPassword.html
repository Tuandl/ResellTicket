<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>

<head>
	<title>Big store a Ecommerce Online Shopping Category Flat Bootstrap Responsive Website Template | Register ::
		w3layouts</title>
	<!-- for-mobile-apps -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta property="og:title" content="Vide" />
	<meta name="keywords" content="Big store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
	<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
function hideURLbar(){ window.scrollTo(0,1); } </script>
	<!-- //for-mobile-apps -->
	<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
	<!-- Custom Theme files -->
	<link href="css/style.css" rel='stylesheet' type='text/css' />
	<!-- js -->
	<script src="js/jquery-1.11.1.min.js"></script>
	<!-- //js -->
	<!-- start-smoth-scrolling -->
	<script type="text/javascript" src="js/move-top.js"></script>
	<script type="text/javascript" src="js/easing.js"></script>
	<script type="text/javascript">
		jQuery(document).ready(function ($) {
			$(".scroll").click(function (event) {
				event.preventDefault();
				$('html,body').animate({ scrollTop: $(this.hash).offset().top }, 1000);
			});
		});
	</script>
	<!-- start-smoth-scrolling -->
	<link href="css/font-awesome.css" rel="stylesheet">
	<link href='//fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
	<link href='//fonts.googleapis.com/css?family=Noto+Sans:400,700' rel='stylesheet' type='text/css'>
	<!--- start-rate---->
	<script src="js/jstarbox.js"></script>
	<link rel="stylesheet" href="css/jstarbox.css" type="text/css" media="screen" charset="utf-8" />
	<script type="text/javascript">
		jQuery(function () {
			jQuery('.starbox').each(function () {
				var starbox = jQuery(this);
				starbox.starbox({
					average: starbox.attr('data-start-value'),
					changeable: starbox.hasClass('unchangeable') ? false : starbox.hasClass('clickonce') ? 'once' : true,
					ghosting: starbox.hasClass('ghosting'),
					autoUpdateAverage: starbox.hasClass('autoupdate'),
					buttons: starbox.hasClass('smooth') ? false : starbox.attr('data-button-count') || 5,
					stars: starbox.attr('data-star-count') || 5
				}).bind('starbox-value-changed', function (event, value) {
					if (starbox.hasClass('random')) {
						var val = Math.random();
						starbox.next().text(' ' + val);
						return val;
					}
				})
			});
		});
	</script>
	<!---//End-rate---->
	<style>
		::placeholder {
			color: #999;
			opacity: 1;
			/* Firefox */
		}

		:-ms-input-placeholder {
			/* Internet Explorer 10-11 */
			color: #999;
		}

		::-ms-input-placeholder {
			/* Microsoft Edge */
			color: #999;
		}

		#form-messages {
			background-color: rgb(255, 232, 232);
			border: 2px solid red;
			color: red;
			display: none;
			font-size: 12px;
			font-weight: bold;
			margin-bottom: 10px;
			padding: 10px 25px;
			max-width: 400px;
		}
	</style>
	<script type="text/javascript" src="constant/BasrUrl.js"></script>
	<script type="text/javascript" src="/js/moment.js"></script>
	<script type="module" src="/js/top-bar.js"></script>
</head>

<body>
	<div class="header">

		<div class="container">

			<div class="logo">
				<h1><a href="index.html"><b>T<br>H<br>E</b>Resell Ticket<span>The world's travel marketplace</span></a>
				</h1>
			</div>
			<div class="head-t" id="top-bar-container">
			</div>

			<div class="header-ri">
				<ul class="social-top">
					<li><a href="#" class="icon facebook"><i class="fa fa-facebook"
								aria-hidden="true"></i><span></span></a></li>
					<li><a href="#" class="icon twitter"><i class="fa fa-twitter"
								aria-hidden="true"></i><span></span></a></li>
					<li><a href="#" class="icon pinterest"><i class="fa fa-pinterest-p"
								aria-hidden="true"></i><span></span></a></li>
					<li><a href="#" class="icon dribbble"><i class="fa fa-dribbble"
								aria-hidden="true"></i><span></span></a></li>
				</ul>
			</div>


			<div class="nav-top">
				<nav class="navbar navbar-default">

					<div class="navbar-header nav_2">
						<button type="button" class="navbar-toggle collapsed navbar-toggle1" data-toggle="collapse"
							data-target="#bs-megadropdown-tabs">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>


					</div>
					<div class="collapse navbar-collapse" id="bs-megadropdown-tabs">
						<ul class="nav navbar-nav ">
							<li class="active"><a href="index.html" class="hyper "><span>Route</span></a></li>
							<li><a href="codes.html" class="hyper"> <span>Tour</span></a></li>
						</ul>
					</div>
				</nav>

				<div class="clearfix"></div>
			</div>

		</div>
	</div>
	<!---->

	<!--banner-->
	<div class="banner-top">
		<div class="container">
			<h3>ResetPassword</h3>
			<h4><a href="index.html">Home</a><label>/.../</label>ResetPassword</h4>
			<div class="clearfix"> </div>
		</div>
	</div>

	<!--login-->
	<script type="text/javascript">
		function checkValidPassword() {
			var txtPassword = document.getElementsByName("txtPassword")[0].value;
			var patt = /^[a-zA-Z0-9]{6,100}$/;
			var passwordAlert = document.getElementById("password-alert");
			if (patt.test(txtPassword)) {
				passwordAlert.style.display = 'none';
				return true;
			} else {
				passwordAlert.style.display = 'block';
				return false;
			}
		}

		function checkConfirmPassword() {
			var txtPassword = document.getElementsByName("txtPassword")[0].value;
			var txtConfirmPassword = document.getElementsByName("txtConfirmPassword")[0].value;
			console.log("confirm : ", txtConfirmPassword);
			var confirmPasswordAlert = document.getElementById("confirmpassword-alert");
			if (txtConfirmPassword === txtPassword) {
				confirmPasswordAlert.style.display = 'none';
				return true;
			} else {
				confirmPasswordAlert.style.display = 'block';
				return false;
			}
		}

		function checkValidOTP() {
			var txtOPTCode = document.getElementsByName("txtOPTCode")[0].value;
			console.log("otp nè", txtOPTCode);
			var patt = /^[0-9]{6}$/;
			var otpAlert = document.getElementById("otp-alert");
			if (patt.test(txtOPTCode)) {
				otpAlert.style.display = 'none';
				return true;
			} else {
				otpAlert.style.display = 'block';
				return false;
			}
		}

		async function resetPassword() {
			var txtPhoneNumber = localStorage.getItem("PHONENUMBER");
			var txtOPTCode = document.getElementsByName("txtOPTCode")[0].value;
			var txtPassword = document.getElementsByName("txtPassword")[0].value;
			var alertInvalid = document.getElementById("register-alert");
			var alertExpired = document.getElementById("register-alert-expired");
			const data = {
				phoneNumber: txtPhoneNumber,
				otp: txtOPTCode,
				password: txtPassword
			};

			if ( checkValidPassword() && checkConfirmPassword() && checkValidOTP()) {
				var respone = await fetch(baseUrl() + 'api/customer/reset-password', {
					method: "POST",
					headers: {
						'Accept': 'application/json',
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(data)
				});
				if (respone.status === 400) {
					alertExpired.style.display = 'none';
					alertInvalid.style.display = 'block';
				} else if(respone.status === 406){
					alertExpired.style.display = 'block';
					alertInvalid.style.display = 'none';
				} else {
					alertInvalid.style.display = 'none';
					localStorage.removeItem("PHONENUMBER");
					window.location.href = 'login.html';
				}
			} else {
				alert("Enter all field please!!!")
			} 
		}
	</script>

	<div class="login">
		<div class="main-agileits">
			<div class="form-w3agile form1">
				<h3>ResetPassword</h3>
				<form action="#" method="post">
					<label>Password:</label>
					<div class="key">
						<i class="fa fa-lock" aria-hidden="true"></i>
						<input type="password" placeholder="Password" name="txtPassword">
						<div class="clearfix"></div>
					</div>
					<div id="password-alert" style="display: none" class="alert alert-danger" role="alert">
						Please enter a valid password !!! More than 6 digits please!!
					</div>
					<label>Confirm Password:</label>
					<div class="key">
						<i class="fa fa-lock" aria-hidden="true"></i>
						<input type="password" placeholder="Confirm Password" name="txtConfirmPassword">
						<div class="clearfix"></div>
					</div>
					<div id="confirmpassword-alert" style="display: none" class="alert alert-danger" role="alert">
						Password not match !!!
					</div>
					<label>OTP Code:</label>
					<div class="key">
						<i class="fa fa-pinterest-p" aria-hidden="true"></i>
						<input type="text" placeholder="OPTCode" name="txtOPTCode">
						<div class="clearfix"></div>
					</div>
					<div id="otp-alert" style="display: none" class="alert alert-danger" role="alert">
						OTP number must have 6 digits !!!
					</div>
					<div id="register-alert" style="display: none" class="alert alert-danger" role="alert">
						OTP number is wrong!!
					</div>
					<div id="register-alert-expired" style="display: none" class="alert alert-danger" role="alert">
							OTP number is expired!!
						</div>
					<button type="button" onclick="resetPassword()" class="btn btn-large btn-block btn-warning">
						Reset password
					</button>
				</form>
			</div>

		</div>
	</div>
	<!--footer-->
	<div class="footer">
		<div class="container">
			<div class="footer-bottom">
				<h2><a href="index.html"><b>T<br>H<br>E</b>Resell Ticket<span>The world's travel marketplace</span></a>
				</h2>
				<p class="fo-para">Bringing people with unwanted travel plans together with those wanting incredible
					last-minute deals. Welcome to a world of opportunities.</p>
				<ul class="social-fo">
					<li><a href="#" class=" face"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
					<li><a href="#" class=" twi"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
					<li><a href="#" class=" pin"><i class="fa fa-pinterest-p" aria-hidden="true"></i></a></li>
					<li><a href="#" class=" dri"><i class="fa fa-dribbble" aria-hidden="true"></i></a></li>
				</ul>
				<div class=" address">
					<div class="col-md-4 fo-grid1">
						<p><i class="fa fa-home" aria-hidden="true">Lầu 2, toà nhà Innovation, lô 24 - CVPM Quang Trung
								- P. Tân Chánh Hiệp, Quận 12, TP. HCM</i></p>
					</div>
					<div class="col-md-4 fo-grid1">
						<p><i class="fa fa-phone" aria-hidden="true"></i>+840916512300</p>
					</div>
					<div class="col-md-4 fo-grid1">
						<p><a href="mailto:info@example.com"><i class="fa fa-envelope-o"
									aria-hidden="true"></i>dark5695@gmail.com</a></p>
					</div>
					<div class="clearfix"></div>

				</div>
			</div>
			<div class="copy-right">
				<p> &copy; 2016 Resell Ticket. All Rights Reserved | Design by <a href="http://w3layouts.com/">
						W3layouts</a></p>
			</div>
		</div>
	</div>
	<!-- //footer-->
	<!-- smooth scrolling -->
	<script type="text/javascript">
		$(document).ready(function () {
			/*
				var defaults = {
				containerID: 'toTop', // fading element id
				containerHoverID: 'toTopHover', // fading element hover id
				scrollSpeed: 1200,
				easingType: 'linear' 
				};
			*/
			$().UItoTop({ easingType: 'easeOutQuart' });
		});
	</script>
	<a href="#" id="toTop" style="display: block;"> <span id="toTopHover" style="opacity: 1;"> </span></a>
	<!-- //smooth scrolling -->
	<!-- for bootstrap working -->
	<script src="js/bootstrap.js"></script>
	<!-- //for bootstrap working -->
	<script type='text/javascript' src="js/jquery.mycart.js"></script>
	<script type="text/javascript">
		$(function () {

			var goToCartIcon = function ($addTocartBtn) {
				var $cartIcon = $(".my-cart-icon");
				var $image = $('<img width="30px" height="30px" src="' + $addTocartBtn.data("image") + '"/>').css({ "position": "fixed", "z-index": "999" });
				$addTocartBtn.prepend($image);
				var position = $cartIcon.position();
				$image.animate({
					top: position.top,
					left: position.left
				}, 500, "linear", function () {
					$image.remove();
				});
			}

			$('.my-cart-btn').myCart({
				classCartIcon: 'my-cart-icon',
				classCartBadge: 'my-cart-badge',
				affixCartIcon: true,
				checkoutCart: function (products) {
					$.each(products, function () {
						console.log(this);
					});
				},
				clickOnAddToCart: function ($addTocart) {
					goToCartIcon($addTocart);
				},
				getDiscountPrice: function (products) {
					var total = 0;
					$.each(products, function () {
						total += this.quantity * this.price;
					});
					return total * 1;
				}
			});

		});
	</script>

</body>

</html>